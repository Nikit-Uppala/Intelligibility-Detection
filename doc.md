# Documentation

## Table of contents
1. [Which file does what?](#which-file-does-what)
2. [Files Details](#files)
3. [Requirements](#requirements)


## Which file does what
for more details prefer, Files section [[files](#files)].
1. [Calculate the threshold](threshold_gaussian.py) - This File is used to create the threshold, using the feature set. Run `threshold_gaussian.py`
2. [Clip or normalise the calulated Scores](script.py) - This is done so as to normalise the threshold using normalised or clipped matching and non-matching scores.
3. [Plot the Gaussians](plot_gaussians.py) - This is used to plot the visualise the gaussian.
4. [Run the Whole code to find intelligibity of test sets](pipeline.py) - This file contains the code for calculating and predicting intelligibity of an feature.  

## Files
### [threshold_gaussian.py](threshold_gaussian.py):
- Purpose: This files is used to generate the threshold given a data. There are two types of threshold used in the paper, intersection and average of mean of both distribution that will be formed using matching and non-matching scores. 
- Input: The input contains the feature set, the naming nomenclature may have to change as the code, is currently based on the nomenclature that the previous dataset was follwing.
- Output:  
    - It generates and saves matching and non-matching score in results folder
    - It saves gaussian plot data for both matching and nonmatching, this is done so that we don;t have to run code again to generate the gaussian plots.
    - It calculates and saves the threshold values in result folder under the name `threshold_{version}.txt`
- Functions: 
    - update_dist(): It calls the match_score function on the features we passed and if the type of both features are equal it updates it in matching_score list else it updates it in non_matching_score list.
    - solve(): This function is used to calculate the intersection of two gaussians.
    - get_threshold(): This function is the main function calling the other support function, to generate the threshold and along with it the matching and non_matching scores.

### [script.py](script.py):
- Purpose: This files is used to loads the matching and non_matching scores that we calculated using the threshold_gaussian.py, and performs basic actions like clipping the farthest values, normalising the whole the scores and stores them respectively, later it calculates the threshold based on these new values and stores and name them respectively.  
- Input: The matching and non_matching scores should be calculated before, and should be stored in the results folder. It will load it from there and will process on the loaded data.
- Output: 
    - It clips the matching and non-matching scores calculated and stores them in result folder under the name `{non_}matching_clipped_scores{version}.npy`.
    - it normalises the matching and non matching score and stores them under the name `{non_}matching_normalized_scores{version}.npy` in results folder
    - It recalculates the threshold using these newly obtained values and store them in results folder.
- Functions:
    - normalized_scores(): it normalises and returns the result.
    - clip(): similarly it clips the scores.
    - get_thresholds(): It recalculates the scores based on the above newly processed data.
    - main(): Its the main driver function.

### [plot_gaussians.py](plot_gaussians.py)
- Purpose: It just uses the stores data in results folder to create a gaussian plot using them
- Parameters: It needs one arguments which are [No Argument],normalized, clipped, None will use the same data as provided, normalised will normalise the data between 0-1, clipped will clip the data to mean-3*sd and mean+3*sd.
- Input: It will load it from the result folder and will create a plot on the loaded data. It needs some data generated by the above 2 files.
- Output: Generates plot using matplotlib.

### [match_score.py](match_score.py)
- Purpoose: This file handles the calculation and generation of intelligibility scores as given in the paper.
- Functions: 
    - KL_diveregence(): Calculates the KL-divergence on two vector,and returns the calculated values
    - match_score(): This function returns the accumulated match score (inteligibility score) between Z and Y.

### [intelligibility_detection.py](intelligibility_detection.py)
- Function: 
    - is_intelligible(): Returns whether the feature is intelligible or not.

### [pipeline.py](pipeline.py)
- Purpose: Created to calculate the intelligibity score, given the dataset 
## Requirements
```shell
pip install -r requirements.txt
```